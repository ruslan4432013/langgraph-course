# LangGraph Interrupts - Human-in-the-Loop Demo

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ö–∞–Ω–∏–∑–º–∞ **Interrupts** –≤ LangGraph ‚Äî –æ—Å–Ω–æ–≤—ã –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Human-in-the-Loop –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö
AI-—Å–∏—Å—Ç–µ–º —Å —É—á–∞—Å—Ç–∏–µ–º —á–µ–ª–æ–≤–µ–∫–∞.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–ß—Ç–æ —Ç–∞–∫–æ–µ Interrupts](#—á—Ç–æ-—Ç–∞–∫–æ–µ-interrupts)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)

## –û–ø–∏—Å–∞–Ω–∏–µ

**Human-in-the-Loop (HITL)** ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π AI-—Å–∏—Å—Ç–µ–º–∞–º –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è
–æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è:

- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úèÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- üîÑ –í–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- üìù –°–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ

## –ß—Ç–æ —Ç–∞–∫–æ–µ Interrupts

–§—É–Ω–∫—Ü–∏—è `interrupt()` —Å–æ–∑–¥–∞—ë—Ç **—Ç–æ—á–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏** –≤ –≥—Ä–∞—Ñ–µ LangGraph:

```
python
from langgraph.types import interrupt, Command

# –í —É–∑–ª–µ –≥—Ä–∞—Ñ–∞
decision = interrupt({"question": "–û–¥–æ–±—Ä–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ?", "details": "..."})

# –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
graph.invoke(Command(resume=True), config)
```

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç               | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                              |
|-------------------------|-----------------------------------------|
| `interrupt(payload)`    | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—É |
| `Command(resume=value)` | –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –æ—Ç–≤–µ—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è    |
| `Checkpointer`          | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏ |
| `thread_id`             | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è       |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- LangGraph 1.0+

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```
bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd langgraph-course

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# –∏–ª–∏
.venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```

langgraph-course/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ interrupt_intro/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ simple_approve_1.py        # –ü—Ä–∏–º–µ—Ä 1: Approval Workflow
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ review_and_edit_intro_2.py # –ü—Ä–∏–º–µ—Ä 2: Review & Edit
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interrupt_tools_3.py       # –ü—Ä–∏–º–µ—Ä 3: Interrupts –≤ Tools
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation_loop_4.py       # –ü—Ä–∏–º–µ—Ä 4: Validation Loop
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ multiple_interrupts_5.py   # –ü—Ä–∏–º–µ—Ä 5: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ Interrupts
‚îÇ   ‚îî‚îÄ‚îÄ settings.py
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## –ü—Ä–∏–º–µ—Ä—ã

### 1. Simple Approval Workflow (`simple_approve_1.py`)

–ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

```
python
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
decision = interrupt({
    "question": "–û–¥–æ–±—Ä–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ?",
    "details": state["action_details"],
})

# –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–∞
return Command(goto="proceed" if decision else "cancel")
```

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (–ø–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥, —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö) —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.

---

### 2. Review and Edit State (`review_and_edit_intro_2.py`)

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

```
python
edited_content = interrupt({
    "instruction": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç",
    "content": state["generated_text"],
})
return {"generated_text": edited_content}
```

**–°—Ü–µ–Ω–∞—Ä–∏–π:** AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –µ–≥–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.

---

### 3. Interrupts –≤ Tools (`interrupt_tools_3.py`)

–¢–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞.

```
python
@tool
def send_email_tool(to: str, subject: str, body: str):
    response = interrupt({
        "action": "send_email",
        "to": to,
        "subject": subject,
        "message": "–û–¥–æ–±—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É?",
    })
    
    if response.get("action") == "approve":
        # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏
        final_subject = response.get("subject", subject)
        # ...
```

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ê–≥–µ–Ω—Ç —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å email ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É/—Ç–µ–∫—Å—Ç.

---

### 4. Validation Loop (`validation_loop_4.py`)

–¶–∏–∫–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏.

```
python
while True:
    answer = interrupt(prompt)
    
    if isinstance(answer, int) and 0 < answer < 150:
        return {"age": answer}
    else:
        prompt = f"'{answer}' - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ:"
```

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

---

### 5. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ Interrupts (`multiple_interrupts_5.py`)

–ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ—á–µ–∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –æ–¥–Ω–æ–º —É–∑–ª–µ.

```
python
def collect_user_info_node(state):
    # –í–∞–∂–Ω–æ: –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º!
    name = interrupt("–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?")
    age = interrupt("–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?")
    city = interrupt("–í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ –≤—ã –∂–∏–≤–µ—Ç–µ?")
    
    return {"name": name, "age": age, "city": city}
```

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ—à–∞–≥–æ–≤—ã–π —Å–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–∏—é –≤–æ–ø—Ä–æ—Å–æ–≤.

## –ó–∞–ø—É—Å–∫

–ö–∞–∂–¥—ã–π –ø—Ä–∏–º–µ—Ä –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ:

```
bash
# –ü—Ä–∏–º–µ—Ä 1: Approval Workflow
python src/interrupt_intro/simple_approve_1.py

# –ü—Ä–∏–º–µ—Ä 2: Review & Edit
python src/interrupt_intro/review_and_edit_intro_2.py

# –ü—Ä–∏–º–µ—Ä 3: Interrupts –≤ Tools
python src/interrupt_intro/interrupt_tools_3.py

# –ü—Ä–∏–º–µ—Ä 4: Validation Loop
python src/interrupt_intro/validation_loop_4.py

# –ü—Ä–∏–º–µ—Ä 5: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ Interrupts
python src/interrupt_intro/multiple_interrupts_5.py
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [LangGraph Human-in-the-Loop Documentation](https://langchain-ai.github.io/langgraph/concepts/human_in_the_loop/)
- [LangGraph Interrupts Guide](https://langchain-ai.github.io/langgraph/how-tos/human_in_the_loop/breakpoints/)
