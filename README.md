# Breakpoints в LangGraph: Учебный пример

Этот проект демонстрирует использование механизмов прерывания (breakpoints) в LangGraph для реализации паттерна "
Human-in-the-loop" (участие человека в цикле).

## Описание

В этом примере создается простой ИИ-агент, способный выполнять арифметические операции (сложение, умножение, деление) с
помощью инструментов. Основная особенность — использование параметра `interrupt_before`, который позволяет приостановить
выполнение графа перед вызовом инструментов и дождаться подтверждения от пользователя.

## Структура проекта

* `src/breakpoints_intro/react.py` — Определение графа LangGraph. Здесь настраивается логика агента, подключаются
  инструменты и указываются точки прерывания (`interrupt_before=["tools"]`).
* `src/breakpoints_intro/breakpoints.py` — Пример запуска графа через CLI. Демонстрирует, как остановить выполнение,
  получить состояние и возобновить работу после ввода пользователя.
* `src/breakpoints_intro/studio_example.py` — Пример взаимодействия с графом через LangGraph SDK.
* `src/settings.py` — Загрузка настроек и переменных окружения (используется Pydantic Settings).
* `langgraph.json` — Конфигурационный файл для интеграции с LangGraph Studio.
* `requirements.txt` — Список необходимых библиотек.

## Установка

1. Клонируйте репозиторий.
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Создайте файл `.env` в корне проекта и укажите необходимые переменные (см. `src/settings.py`):
   ```env
   OPENAI_API_KEY=your_api_key_here
   ```

## Запуск

### Консольный интерфейс

Для запуска примера с подтверждением в консоли выполните:

```bash
python -m src.breakpoints_intro.breakpoints
```

### LangGraph Studio

Для визуализации и интерактивной отладки можно использовать LangGraph Studio. Если у вас установлен `langgraph-cli`,
запустите:

```bash
langgraph dev
```

## Как это работает

1. **Компиляция с прерыванием**: При вызове `builder.compile(interrupt_before=["tools"], ...)` граф настраивается так,
   чтобы всегда останавливаться перед узлом `tools`.
2. **Сохранение состояния**: Используется `MemorySaver` (checkpointer), который сохраняет текущее состояние графа в
   момент прерывания.
3. **Возобновление**: Чтобы продолжить выполнение после паузы, в метод `stream` (или `invoke`) передается `None` в
   качестве входных данных, при этом указывается тот же `thread_id`.
