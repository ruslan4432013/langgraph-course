# Пример использования подграфов (Sub-graphs) в LangGraph

Данный проект представляет собой учебный пример реализации системы обработки логов с использованием вложенных графов (
подграфов). Такое разделение позволяет изолировать логику различных этапов обработки и упростить поддержку кода.

## Структура проекта

* `src/subgraph_intro/entry_graph.py`: Точка входа. Основной граф, который управляет потоком данных между подграфами.
* `src/subgraph_intro/failure_analysis_subgraph.py`: Специализированный подграф для выявления и анализа ошибок в логах.
* `src/subgraph_intro/question_summarization_subgraph.py`: Специализированный подграф для суммаризации вопросов
  пользователей и подготовки отчетов.
* `src/subgraph_intro/log_state.py`: Описание базовых моделей данных.
* `static/img.png`: Визуализация архитектуры основного графа.

## Визуализация графа

Ниже представлена схема основного графа (`entry_graph`), включающая узлы подграфов:

![Граф системы](static/img.png)

## Как это работает

1. **Очистка данных (`clean_logs`)**: Основной граф получает сырые логи и подготавливает их для дальнейшей обработки.
2. **Параллельная обработка**:
    * **Анализ ошибок (`failure_analysis`)**: В этом подграфе логи фильтруются на предмет наличия ошибок (поле `grade`).
      Для найденных ошибок генерируется сводка `fa_summary`.
    * **Суммаризация вопросов (`question_summarization`)**: Параллельно этот подграф анализирует все входящие вопросы,
      создает общую сводку и формирует отчет (`report`), имитируя отправку в Slack.
3. **Агрегация состояния**: Оба подграфа возвращают данные, которые объединяются в общем состоянии `EntryGraphState`.
   Особое внимание уделено полю `processed_logs`, которое демонстрирует механизм накопления данных из разных веток графа
   с помощью аннотации `Annotated[List, add]`.

---
Пример демонстрирует мощь композиции в LangGraph, позволяя создавать сложные агентные системы из простых, независимых
блоков.
